<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartLearn - Flashcards</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .flashcard { transition: transform 0.6s; cursor: pointer; perspective: 1000px; }
    .flashcard.flipped .flashcard-front { transform: rotateY(180deg);}
    .flashcard.flipped .flashcard-back { transform: rotateY(0);}
    .flashcard-front, .flashcard-back {
      backface-visibility: hidden;
      transition: transform 0.6s;
      position: absolute; width: 100%; height: 100%;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
    }
    .flashcard-front { background: #fff; z-index: 2; transform: rotateY(0); }
    .flashcard-back { background: #f5f5f5; transform: rotateY(180deg);}
    .flashcard-wrapper { position: relative; width: 350px; height: 200px; margin: 2rem auto;}
    .review-stats { text-align:center; margin-top:1rem; color: #333; }
    .review-bar { width:100%; background:#eee; border-radius:6px; margin: 0.5rem 0;}
    .review-bar-inner { height:14px; background: #2ecc71; border-radius:6px; transition: width 0.5s;}
    .stats-table { width:100%; margin: 1rem auto; max-width:340px; font-size:0.9rem; }
    .stats-table th, .stats-table td { padding: 4px 8px; text-align:left;}
    .know-btn, .dontknow-btn { 
      padding: 0.6rem 1.2rem; border:none; margin:0 0.5rem; border-radius:8px;
      font-weight:600; font-size:1rem; cursor:pointer;
      transition: background 0.2s;
    }
    .know-btn { background: #2ecc71; color: #fff;}
    .know-btn:hover { background: #27ae60;}
    .dontknow-btn { background: #e74c3c; color: #fff;}
    .dontknow-btn:hover { background: #c0392b;}
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="brain.png" alt="SmartLearn Logo">
    </div>
    <h1>SmartLearn</h1>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="flashcards.html" class="active">Flashcards</a></li>
        <li><a href="quiz.html">Quiz</a></li>
        <li><a href="notes.html">Notes</a></li>
        <li><a href="tracker.html">Lesson Tracker</a></li>
      </ul>
    </nav>
  </header>

  <main class="flashcards-container">
    <section class="flashcard-controls">
      <h2>Interactive Flashcards</h2>
      <div class="controls">
        <button id="new-card" class="btn">+ New Card</button>
        <button id="shuffle" class="btn">üîÄ Shuffle</button>
        <div class="progress">
          <span id="progress-count">1/5</span>
          <div id="progress-bar">
            <div id="progress"></div>
          </div>
        </div>
      </div>
    </section>

    <div class="flashcard-wrapper">
      <div class="flashcard" id="flashcard">
        <div class="flashcard-front">
          <h3>What is HTML?</h3>
          <p>Click to reveal answer</p>
        </div>
        <div class="flashcard-back">
          <h3>Answer:</h3>
          <p>HyperText Markup Language - the standard markup language for documents designed to be displayed in a web browser.</p>
        </div>
      </div>
    </div>

    <div class="navigation" style="display:flex; justify-content:center; gap:1rem;">
      <button id="prev" class="btn nav-btn">‚Üê Previous</button>
      <button id="flip" class="btn nav-btn">Flip Card</button>
      <button id="next" class="btn nav-btn">Next ‚Üí</button>
    </div>

    <div style="text-align:center;margin-top:1.5rem;">
      <button class="know-btn" id="know-btn">I Knew This</button>
      <button class="dontknow-btn" id="dontknow-btn">I Didn‚Äôt Know</button>
    </div>
    <div class="review-stats">
      <div>Spaced Repetition Review Progress</div>
      <div class="review-bar">
        <div class="review-bar-inner" id="review-bar-inner" style="width:0%"></div>
      </div>
      <div id="review-summary"></div>
      <table class="stats-table" id="review-table">
        <thead>
          <tr>
            <th>Card</th>
            <th>Known</th>
            <th>Don't Know</th>
            <th>Last Reviewed</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 SmartLearn. All rights reserved.</p>
  </footer>

  <script>
    // ========== Flashcard Functionality with Spaced Repetition ==========
    document.addEventListener('DOMContentLoaded', () => {
      const flashcard = document.getElementById('flashcard');
      const flipBtn = document.getElementById('flip');
      const nextBtn = document.getElementById('next');
      const prevBtn = document.getElementById('prev');
      const newCardBtn = document.getElementById('new-card');
      const shuffleBtn = document.getElementById('shuffle');
      const knowBtn = document.getElementById('know-btn');
      const dontKnowBtn = document.getElementById('dontknow-btn');
      const progressCount = document.getElementById('progress-count');
      const progressBar = document.getElementById('progress');
      const reviewBarInner = document.getElementById('review-bar-inner');
      const reviewSummary = document.getElementById('review-summary');
      const reviewTable = document.getElementById('review-table').querySelector('tbody');

      // 10 Flashcard Q&A
      function loadCards() {
        return JSON.parse(localStorage.getItem('smartlearn-flashcards')) || [
          { front: "What is HTML?", back: "HyperText Markup Language - the standard markup language for documents designed to be displayed in a web browser." },
          { front: "What is CSS?", back: "Cascading Style Sheets - a style sheet language used for describing the presentation of a document written in HTML." },
          { front: "What is JavaScript?", back: "A programming language that conforms to the ECMAScript specification, used to make web pages interactive." },
          { front: "What is the DOM?", back: "Document Object Model - a programming interface for web documents that represents the page as nodes and objects." },
          { front: "What is responsive design?", back: "An approach to web design that makes web pages render well on a variety of devices and window sizes." },
          { front: "What is a closure in JavaScript?", back: "A function that has access to its own scope, the outer function's variables, and global variables." },
          { front: "What does AJAX stand for?", back: "Asynchronous JavaScript and XML - a technique for creating fast and dynamic web pages." },
          { front: "What is JSON?", back: "JavaScript Object Notation - a lightweight data interchange format that's easy for humans to read and write." },
          { front: "What is an API?", back: "Application Programming Interface - a set of definitions and protocols for building and integrating application software." },
          { front: "What is npm?", back: "Node Package Manager - the world's largest software registry for publishing and sharing packages of code." }
        ];
      }
      function saveCards() {
        localStorage.setItem('smartlearn-flashcards', JSON.stringify(cards));
        localStorage.setItem('smartlearn-flashcard-reviews', JSON.stringify(reviewStats));
      }

      let cards = loadCards();
      let currentIndex = 0;
      // Spaced repetition review stats: { [card index]: { known: n, dontknow: n, last: timestamp } }
      let reviewStats = JSON.parse(localStorage.getItem('smartlearn-flashcard-reviews')) || {};

      // Flip card function
      function flipCard() {
        flashcard.classList.toggle('flipped');
      }

      // Update card display
      function updateCard() {
        const front = flashcard.querySelector('.flashcard-front h3');
        const back = flashcard.querySelector('.flashcard-back p');
        front.textContent = cards[currentIndex]?.front || '';
        back.textContent = cards[currentIndex]?.back || '';
        progressCount.textContent = `${currentIndex + 1}/${cards.length}`;
        progressBar.style.width = `${((currentIndex + 1) / cards.length) * 100}%`;
        // Reset flip state if card was flipped
        flashcard.classList.remove('flipped');
        updateReviewStatsUI();
      }

      // New Card
      newCardBtn.addEventListener('click', () => {
        const frontText = prompt("Enter front of card:");
        if (frontText) {
          const backText = prompt("Enter back of card:");
          if (backText) {
            cards.push({ front: frontText, back: backText });
            currentIndex = cards.length - 1;
            saveCards();
            updateCard();
          }
        }
      });

      // Shuffle
      shuffleBtn.addEventListener('click', () => {
        for (let i = cards.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [cards[i], cards[j]] = [cards[j], cards[i]];
        }
        currentIndex = 0;
        saveCards();
        updateCard();
      });

      // Navigation
      nextBtn.addEventListener('click', () => {
        if (currentIndex < cards.length - 1) {
          currentIndex++;
          updateCard();
        }
      });
      prevBtn.addEventListener('click', () => {
        if (currentIndex > 0) {
          currentIndex--;
          updateCard();
        }
      });

      // Flip
      flipBtn.addEventListener('click', flipCard);
      flashcard.addEventListener('click', flipCard);

      // Know/Don't Know buttons for spaced repetition (simple SM2-like stats)
      knowBtn.addEventListener('click', () => {
        updateReview(true);
      });
      dontKnowBtn.addEventListener('click', () => {
        updateReview(false);
      });

      function updateReview(know) {
        if (!reviewStats[currentIndex]) {
          reviewStats[currentIndex] = { known: 0, dontknow: 0, last: '' };
        }
        if (know) reviewStats[currentIndex].known++;
        else reviewStats[currentIndex].dontknow++;
        reviewStats[currentIndex].last = new Date().toISOString();

        // If "know", move card to end (simulate spaced repetition, next review is later)
        if (know && cards.length > 1) {
          const card = cards.splice(currentIndex, 1)[0];
          cards.push(card);
          // Move stat entry to end
          const stat = reviewStats[currentIndex];
          delete reviewStats[currentIndex];
          reviewStats[cards.length - 1] = stat;
          currentIndex = Math.min(currentIndex, cards.length - 1);
        }
        saveCards();
        updateCard();
      }

      function updateReviewStatsUI() {
        let knownCount = 0, total = cards.length;
        reviewTable.innerHTML = '';
        cards.forEach((card, i) => {
          const stat = reviewStats[i] || { known: 0, dontknow: 0, last: '-' };
          if (stat.known > stat.dontknow) knownCount++;
          const row = document.createElement('tr');
          row.innerHTML = `<td>${card.front.slice(0, 20)}...</td>
            <td>${stat.known}</td>
            <td>${stat.dontknow}</td>
            <td>${stat.last ? new Date(stat.last).toLocaleDateString() : '-'}</td>`;
          reviewTable.appendChild(row);
        });
        const percent = total === 0 ? 0 : Math.round((knownCount / total) * 100);
        reviewBarInner.style.width = percent + '%';
        reviewSummary.textContent = `Mastered: ${knownCount}/${total} cards (${percent}%)`;
      }

      // Initialize first card
      updateCard();
    });
  </script>
</body>
</html>
